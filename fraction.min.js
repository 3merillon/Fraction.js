/*
 Fraction.js v1.4.0 20/07/2014
 http://www.xarg.org/2014/03/precise-calculations-in-javascript/

 Copyright (c) 2014, Robert Eisele (robert@xarg.org)
 Dual licensed under the MIT or GPL Version 2 licenses.
*/
function Fraction(){function q(a,c){if(0===c%2)return q(a,c/2);if(0===c%5)return q(a,c/5);for(var d=1;d<=c;d++)if(1===r(d,c))return d;return 0}function r(a,c){for(var d=10,e=1;0<a;d=d*d%c,a>>=1)a&1&&(e=e*d%c);return e}function k(b,c){if(!c)throw"DIV/0";a.s=(0<=b)-(0>b);b=Math.abs(b);c=Math.abs(c);for(var d=b,e=c,f;e;)f=e,e=d%e,d=f;a.n=b/d;a.d=c/d;return a}function m(a){var c=0,d=1,e=1,f=0,h=1,g=1,l=1,m=1,n=0;if(1===a.length)a=a[0];else if(2!==a.length)throw"Parameter mismatch";switch(typeof a){case "object":if(null!==
a)if(void 0!==a[0])c=a[0],void 0!==a[1]&&(d=a[1]),e=c*d;else if("d"in a&&"n"in a)c=a.n,d=a.d,e=c*d,void 0!==a.s&&(e*=a.s);else throw"Unknown format";break;case "number":0>a&&(a=-a,e=-1);if(0<a){1<=a&&(m=Math.pow(10,Math.floor(1+Math.log(a)/Math.LN10)),a/=m);for(;1E7>=h&&1E7>=l;)if(c=(f+g)/(h+l),a===c){1E7>=h+l?(c=f+g,d=h+l):l>h?(c=g,d=l):(c=f,d=h);break}else a>c?(f+=g,h+=l):(g+=f,l+=h),1E7<h?(c=g,d=l):(c=f,d=h);c*=m}break;case "string":c=a.split("");f=[0,0,0,0,0];h=[0,0,0,0,0];for(l=0;l<c.length;l++)if(g=
c[l],"."===g)if(0===n)n++;else break;else if("("===g||"'"===g||")"===g)if(0<n&&3>n)n++;else break;else if(0===l&&"-"===g)e=-1;else if(3>n&&!isNaN(g=parseInt(g,10)))f[n]=10*f[n]+g,h[n]++;else break;if(2===n||l<c.length)throw"Corrupted number";f[3]=Math.pow(10,h[1]);f[4]=0<f[2]?Math.pow(10,h[2])-1:1;c=f[2]+f[4]*(f[0]*f[3]+f[1]);d=f[3]*f[4];break;default:throw"Unknown type";}d||k(0,0);p.n=Math.abs(c);p.d=Math.abs(d);p.s=(0<=e)-(0>e);return p}var p={n:0,d:0,s:0},a=this;a.abs=function(){a.s=1;return a};
a.add=function(){var b=m(arguments);return k(a.s*a.n*b.d+b.s*a.d*b.n,a.d*b.d)};a.sub=function(){var b=m(arguments);return k(a.s*a.n*b.d-b.s*a.d*b.n,a.d*b.d)};a.mul=function(){var b=m(arguments);return k(a.s*b.s*a.n*b.n,a.d*b.d)};a.div=function(){var b=m(arguments);return k(a.s*b.s*a.n*b.d,a.d*b.n)};a.set=function(){var a=m(arguments);return k(a.s*a.n,a.d)};a.mod=function(){var b=m(arguments);return 0===b.n*a.d?k(0,0):k(a.s*b.d*a.n%(b.n*a.d),b.d*a.d)};a.ceil=function(){return k(Math.ceil(a.s*a.n/a.d),
1)};a.floor=function(){return k(Math.floor(a.s*a.n/a.d),1)};a.round=function(){return k(Math.round(a.s*a.n/a.d),1)};a.reciprocal=function(){return k(a.s*a.d,a.n)};a.equals=function(){var b=m(arguments);return b.s*b.n*a.d===a.s*a.n*b.d};a.divisible=function(){var b=m(arguments);return!!(b.n*a.d)&&!(a.n*b.d%(b.n*a.d))};a.toNumber=function(){return a.s*a.n/a.d};a.toFraction=function(){return a.n>a.d?0===a.n%a.d?""+a.s*a.n/a.d:(a.s*a.n/a.d|0)+" "+a.n%a.d+"/"+a.d:a.s*a.n+" / "+a.d};a.toString=function(){var b=
(""+a.n).split(""),c=a.d,d=0,e="",f=q(a.n,a.d),h;a:{h=a.d;for(var g=0;300>g;g++)if(r(g,h)===r(g+f,h)){h=g;break a}h=0}for(var g=-1,l=10+f+h+b.length,k=0;k<l;k++){d*=10;k<b.length?d+=parseInt(b[k],10):k===b.length?(e+=".",g=0):g++;if(0<f&&g===h)e+="(";else if(0<f&&g===f+h){e+=")";break}d>=c?(e+=d/c|0,d%=c):e+="0"}return(~a.s?"":"-")+e.replace(/^0+([1-9]|0\.)/g,"$1").replace(/(\d)0+$/,"$1")};var s=m(arguments);k(s.s*s.n,s.d)}"undefined"!==typeof module&&module.exports&&(module.exports.Fraction=Fraction);

/*
 Fraction.js v1.3.1 03/07/2014
 http://www.xarg.org/2014/03/precise-calculations-in-javascript/

 Copyright (c) 2014, Robert Eisele (robert@xarg.org)
 Dual licensed under the MIT or GPL Version 2 licenses.
*/
function Fraction(p){function r(b,a){if(0===a%2)return r(b,a/2);if(0===a%5)return r(b,a/5);for(var c=1;c<=a;c++)if(1===s(c,a))return c;return 0}function s(b,a){for(var c=10,e=1;0<b;c=c*c%a,b>>=1)b&1&&(e=e*c%a);return e}function m(b,d){if(!d)throw"DIV/0";a.s=(0<=b)-(0>b);b=Math.abs(b);d=Math.abs(d);for(var c=b,e=d,f;e;)f=e,e=c%e,c=f;a.n=b/c;a.d=d/c;return a}function l(a){var d=0,c=1,e=1,f=0,g=1,h=1,k=1,l=1,n=0;if(1===a.length)a=a[0];else if(2!==a.length)throw"Parameter mismatch";switch(typeof a){case "object":if(null!==
a)if(void 0!==a[0]&&void 0!==a[1])d=a[0],c=a[1],e=d*c;else if("d"in a&&"n"in a)d=a.n,c=a.d,e=d*c,void 0!==a.s&&(e*=a.s);else throw"Unknown format";break;case "number":0>a&&(a=-a,e=-1);if(0<a){1<=a&&(l=Math.pow(10,Math.floor(1+Math.log(a)/Math.LN10)),a/=l);for(;1E7>=g&&1E7>=k;)if(d=(f+h)/(g+k),a===d){1E7>=g+k?(d=f+h,c=g+k):k>g?(d=h,c=k):(d=f,c=g);break}else a>d?(f+=h,g+=k):(h+=f,k+=g),1E7<g?(d=h,c=k):(d=f,c=g);d*=l}break;case "string":d=a.split("");f=[0,0,0,0,0];g=[0,0,0,0,0];for(k=0;k<d.length;k++)if("."===
d[k])if(0===n)n++;else throw"Corrupted number";else if("("===d[k]||"'"===d[k]||")"===d[k])if(0<n&&3>n)n++;else throw"Corrupted number";else if(0===k&&"-"===d[0])e=-1;else if(3>n){h=parseInt(d[k],10);if(isNaN(h))throw"Corrupted number";f[n]=10*f[n]+h;g[n]++}else throw"Corrupted number";if(2===n)throw"Corrupted number";f[3]=Math.pow(10,g[1]);f[4]=0<f[2]?Math.pow(10,g[2])-1:1;d=f[2]+f[4]*(f[0]*f[3]+f[1]);c=f[3]*f[4];break;default:throw"Unknown type";}c||m(0,0);q.n=Math.abs(d);q.d=Math.abs(c);q.s=(0<=
e)-(0>e);return q}var q={n:0,d:0,s:0},a=this;a.abs=function(){a.s=1;return a};a.add=function(){var b=l(arguments);return m(a.s*a.n*b.d+b.s*a.d*b.n,a.d*b.d)};a.sub=function(){var b=l(arguments);return m(a.s*a.n*b.d-b.s*a.d*b.n,a.d*b.d)};a.mul=function(){var b=l(arguments);return m(a.s*b.s*a.n*b.n,a.d*b.d)};a.div=function(){var b=l(arguments);return m(a.s*b.s*a.n*b.d,a.d*b.n)};a.set=function(){var a=l(arguments);return m(a.s*a.n,a.d)};a.mod=function(){var b=l(arguments);return 0===b.n*a.d?m(0,0):m(a.s*
b.d*a.n%(b.n*a.d),b.d*a.d)};a.reciprocal=function(){return m(a.s*a.d,a.n)};a.equals=function(){var b=l(arguments);return b.s*b.n*a.d===a.s*a.n*b.d};a.divisible=function(){var b=l(arguments);return 0===b.n*a.d?!1:0===a.n*b.d%(b.n*a.d)};a.toNumber=function(){return a.s*a.n/a.d};a.toFraction=function(){return a.n>a.d?0===a.n%a.d?""+a.s*a.n/a.d:(a.s*a.n/a.d|0)+" "+a.n%a.d+"/"+a.d:a.s*a.n+" / "+a.d};a.toString=function(){var b=(""+a.n).split(""),d=a.d,c=0,e="",f=r(a.n,a.d),g;a:{g=a.d;for(var h=0;h<g;h++)if(s(h,
g)===s(h+f,g)){g=h;break a}g=0}for(var h=-1,k=10+f+g+b.length,l=0;l<k;l++){c*=10;l<b.length?c+=parseInt(b[l],10):l===b.length?(e+=".",h=0):h++;if(0<f&&h===g)e+="(";else if(0<f&&h-g===f){e+=")";break}c>=d?(e+=c/d|0,c%=d):e+="0"}return(~a.s?"":"-")+e.replace(/^0+([1-9]|0\.)/g,"$1").replace(/(\d)0+$/,"$1")};p=l(arguments);m(p.s*p.n,p.d)}"undefined"!==typeof module&&module.exports&&(module.exports.Fraction=Fraction);

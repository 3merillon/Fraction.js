/*
 Fraction.js v1.3.2 03/07/2014
 http://www.xarg.org/2014/03/precise-calculations-in-javascript/

 Copyright (c) 2014, Robert Eisele (robert@xarg.org)
 Dual licensed under the MIT or GPL Version 2 licenses.
*/
function Fraction(){function q(b,a){if(0===a%2)return q(b,a/2);if(0===a%5)return q(b,a/5);for(var c=1;c<=a;c++)if(1===r(c,a))return c;return 0}function r(b,a){for(var c=10,f=1;0<b;c=c*c%a,b>>=1)b&1&&(f=f*c%a);return f}function m(b,d){if(!d)throw"DIV/0";a.s=(0<=b)-(0>b);b=Math.abs(b);d=Math.abs(d);for(var c=b,f=d,e;f;)e=f,f=c%f,c=e;a.n=b/c;a.d=d/c;return a}function k(a){var d=0,c=1,f=1,e=0,h=1,g=1,l=1,k=1,n=0;if(1===a.length)a=a[0];else if(2!==a.length)throw"Parameter mismatch";switch(typeof a){case "object":if(null!==
a)if(void 0!==a[0]&&void 0!==a[1])d=a[0],c=a[1],f=d*c;else if("d"in a&&"n"in a)d=a.n,c=a.d,f=d*c,void 0!==a.s&&(f*=a.s);else throw"Unknown format";break;case "number":0>a&&(a=-a,f=-1);if(0<a){1<=a&&(k=Math.pow(10,Math.floor(1+Math.log(a)/Math.LN10)),a/=k);for(;1E7>=h&&1E7>=l;)if(d=(e+g)/(h+l),a===d){1E7>=h+l?(d=e+g,c=h+l):l>h?(d=g,c=l):(d=e,c=h);break}else a>d?(e+=g,h+=l):(g+=e,l+=h),1E7<h?(d=g,c=l):(d=e,c=h);d*=k}break;case "string":d=a.split("");e=[0,0,0,0,0];h=[0,0,0,0,0];for(l=0;l<d.length;l++)if(g=
d[l],"."===g)if(0===n)n++;else break;else if("("===g||"'"===g||")"===g)if(0<n&&3>n)n++;else break;else if(0===l&&"-"===g)f=-1;else if(3>n&&!isNaN(g=parseInt(g,10)))e[n]=10*e[n]+g,h[n]++;else break;if(2===n||l<d.length)throw"Corrupted number";e[3]=Math.pow(10,h[1]);e[4]=0<e[2]?Math.pow(10,h[2])-1:1;d=e[2]+e[4]*(e[0]*e[3]+e[1]);c=e[3]*e[4];break;default:throw"Unknown type";}c||m(0,0);p.n=Math.abs(d);p.d=Math.abs(c);p.s=(0<=f)-(0>f);return p}var p={n:0,d:0,s:0},a=this;a.abs=function(){a.s=1;return a};
a.add=function(){var b=k(arguments);return m(a.s*a.n*b.d+b.s*a.d*b.n,a.d*b.d)};a.sub=function(){var b=k(arguments);return m(a.s*a.n*b.d-b.s*a.d*b.n,a.d*b.d)};a.mul=function(){var b=k(arguments);return m(a.s*b.s*a.n*b.n,a.d*b.d)};a.div=function(){var b=k(arguments);return m(a.s*b.s*a.n*b.d,a.d*b.n)};a.set=function(){var a=k(arguments);return m(a.s*a.n,a.d)};a.mod=function(){var b=k(arguments);return 0===b.n*a.d?m(0,0):m(a.s*b.d*a.n%(b.n*a.d),b.d*a.d)};a.reciprocal=function(){return m(a.s*a.d,a.n)};
a.equals=function(){var b=k(arguments);return b.s*b.n*a.d===a.s*a.n*b.d};a.divisible=function(){var b=k(arguments);return!!(b.n*a.d)&&!(a.n*b.d%(b.n*a.d))};a.toNumber=function(){return a.s*a.n/a.d};a.toFraction=function(){return a.n>a.d?0===a.n%a.d?""+a.s*a.n/a.d:(a.s*a.n/a.d|0)+" "+a.n%a.d+"/"+a.d:a.s*a.n+" / "+a.d};a.toString=function(){var b=(""+a.n).split(""),d=a.d,c=0,f="",e=q(a.n,a.d),h;a:{h=a.d;if(0<e)for(var g=0;300>g;g++)if(r(g,h)===r(g+e,h)){h=g;break a}h=0}for(var g=-1,l=10+e+h+b.length,
k=0;k<l;k++){c*=10;k<b.length?c+=parseInt(b[k],10):k===b.length?(f+=".",g=0):g++;if(0<e&&g===h)f+="(";else if(0<e&&g===e+h){f+=")";break}c>=d?(f+=c/d|0,c%=d):f+="0"}return(~a.s?"":"-")+f.replace(/^0+([1-9]|0\.)/g,"$1").replace(/(\d)0+$/,"$1")};var s=k(arguments);m(s.s*s.n,s.d)}"undefined"!==typeof module&&module.exports&&(module.exports.Fraction=Fraction);

/*
 Fraction.js v1.2.0 12/03/2014
 http://www.xarg.org/2014/03/precise-calculations-in-javascript/

 Copyright (c) 2014, Robert Eisele (robert@xarg.org)
 Dual licensed under the MIT or GPL Version 2 licenses.
*/
function Fraction(m){function q(b,a){if(0===a%2)return q(b,a/2);if(0===a%5)return q(b,a/5);for(var c=1;c<=a;c++)if(1===r(c,a))return c;return 0}function r(b,a){for(var c=10,e=1;0<b;c=c*c%a,b>>=1)b&1&&(e=e*c%a);return e}function h(b,n){if(!n)throw"DIV/0";a.s=(0<=b)-(0>b);b=Math.abs(b);n=Math.abs(n);for(var c=b,e=n,g;e;)g=e,e=c%e,c=g;a.n=b/c;a.d=n/c;return a}function k(b){var a=0,c=1,e=1;if(1===b.length)b=b[0];else if(2!==b.length)throw"Parameter mismatch";switch(typeof b){case "object":if(null===b)break;
else if(void 0!==b[0]&&void 0!==b[1]){a=b[0];c=b[1];e=a*c;break}else if("d"in b&&"n"in b){a=b.n;c=b.d;e=a*c;void 0!==b.s&&(e*=b.s);break}else throw"Unknown format";case "number":0>b&&(b=-b,e=-1);var g=0,d=1,f=1,l=1,k=Math.pow(10,Math.floor(1+Math.log(b)/Math.LN10));for(b/=k;1E7>=d&&1E7>=l;){var m=(g+f)/(d+l);if(b===m){1E7>=d+l?(a=g+f,c=d+l):l>d?(a=f,c=l):(a=g,c=d);break}else b>m?(g+=f,d+=l):(f+=g,l+=d)}1E7>=d&&1E7>=l||(1E7<d?(a=f,c=l):(a=g,c=d));a*=k;break;case "string":a=b.split("");b=[0,0,0,0,0];
c=[0,0,0,0,0];for(f=d=0;f<a.length;f++)if("."===a[f])if(0===d)d++;else throw"Corrupted number";else if("("===a[f]||"'"===a[f]||")"===a[f])if(0<d&&3>d)d++;else throw"Corrupted number";else if(0===f&&"-"===a[0])e=-1;else if(3>d){g=parseInt(a[f],10);if(isNaN(g))throw"Corrupted number";b[d]=10*b[d]+g;c[d]++}else throw"Corrupted number";if(2===d)throw"Corrupted number";b[3]=Math.pow(10,c[1]);b[4]=0<b[2]?Math.pow(10,c[2])-1:1;a=b[2]+b[4]*(b[0]*b[3]+b[1]);c=b[3]*b[4];break;default:throw"Unknown type";}c||
h(0,0);p.n=Math.abs(a);p.d=Math.abs(c);p.s=(0<=e)-(0>e);return p}var p={n:0,d:0,s:0},a=this;a.abs=function(){a.s=1;return a};a.add=function(b){b=k(arguments);return h(a.s*a.n*b.d+b.s*a.d*b.n,a.d*b.d)};a.sub=function(b){b=k(arguments);return h(a.s*a.n*b.d-b.s*a.d*b.n,a.d*b.d)};a.mul=function(b){b=k(arguments);return h(a.s*b.s*a.n*b.n,a.d*b.d)};a.div=function(b){b=k(arguments);return h(a.s*b.s*a.n*b.d,a.d*b.n)};a.set=function(a){a=k(arguments);return h(a.s*a.n,a.d)};a.mod=function(b){b=k(arguments);
return 0===b.n*a.d?h(0,0):h(a.s*b.d*a.n%(b.n*a.d),b.d*a.d)};a.reciprocal=function(){return h(a.s*a.d,a.n)};a.equals=function(b){b=k(arguments);return b.s*b.n*a.d===a.s*a.n*b.d};a.divisible=function(b){b=k(arguments);return 0===b.n*a.d?!1:0===a.n*b.d%(b.n*a.d)};a.toDouble=function(){return a.s*a.n/a.d};a.toFraction=function(){return a.n>a.d?0===a.n%a.d?""+a.s*a.n/a.d:(a.s*a.n/a.d|0)+" "+a.n%a.d+"/"+a.d:a.s*a.n+" / "+a.d};a.toString=function(){var b=(""+a.n).split(""),k=a.d,c=0,e="",g=q(a.n,a.d),d;
a:{d=a.d;for(var f=0;f<d;f++)if(r(f,d)===r(f+g,d)){d=f;break a}d=0}for(var f=-1,l=10+g+d+b.length,h=0;h<l;h++){c*=10;h<b.length?c+=parseInt(b[h],10):h===b.length?(e+=".",f=0):f++;if(0<g&&f===d)e+="(";else if(0<g&&f-d===g){e+=")";break}c>=k?(e+=c/k|0,c%=k):e+="0"}return(~a.s?"":"-")+e.replace(/^0+([1-9]|0\.)/g,"$1").replace(/(\d)0+$/,"$1")};a.n=0;a.d=a.s=1;m=k(arguments);h(m.s*m.n,m.d)}"undefined"!==typeof module&&module.exports&&(module.exports.Fraction=Fraction);

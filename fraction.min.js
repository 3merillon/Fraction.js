/*
Fraction.js v1.8.0 12/05/2015
http://www.xarg.org/2014/03/precise-calculations-in-javascript/

Copyright (c) 2014, Robert Eisele (robert@xarg.org)
Dual licensed under the MIT or GPL Version 2 licenses.
*/
function Fraction(){"use strict";function q(a,d){for(var c;d;)c=a,a=d,d=c%d;return a}function r(a,d){if(0===d%2)return r(a,d/2);if(0===d%5)return r(a,d/5);for(var c=1;2E3>c;c++)if(1===t(c,d))return c;return 0}function t(a,d){for(var c=10,b=1;0<a;c=c*c%d,a>>=1)a&1&&(b=b*c%d);return b}function p(w,b){x(a,w,w,b);return a}function x(a,b,c,e){if(!e)throw"DIV/0";a.s=(0<=b)-(0>b);c=Math.abs(c);e=Math.abs(e);b=q(e,c);a.n=c/b;a.d=e/b}function l(a){var d=0,c=1,e=1,f=0,k=1,h=1,g=1,m=1,n=0;if(1===a.length)a=a[0];else if(2!==a.length)throw"Wrong Parameter";
switch(typeof a){case "object":if(null!==a)if("d"in a&&"n"in a)d=a.n,c=a.d,e=d*c,"s"in a&&(e*=a.s);else if(0 in a)d=a[0],1 in a&&(c=a[1]),e=d*c;else throw"Unknown format";break;case "number":0>a&&(a=-a,e=-1);if(0<a){1<=a&&(m=Math.pow(10,Math.floor(1+Math.log(a)/Math.LN10)),a/=m);for(;1E7>=k&&1E7>=g;)if(c=(f+h)/(k+g),a===c){1E7>=k+g?(d=f+h,c=k+g):g>k?(d=h,c=g):(d=f,c=k);break}else a>c?(f+=h,k+=g):(h+=f,g+=k),1E7<k?(d=h,c=g):(d=f,c=k);d*=m}break;case "string":c=a.split("/");if(2===c.length){d=e=parseInt(c[0],
10);c=parseInt(c[1],10);break}c=a.split("");f=[0,0,0,0,0];k=[0,0,0,0,0];for(g=0;g<c.length;g++)if(h=c[g],"."===h)if(0===n)n++;else break;else if("("===h||"'"===h||")"===h)if(0<n&&3>n)n++;else break;else if(0!==g||"+"!==h)if(0===g&&"-"===h)e=-1;else if(3>n&&!isNaN(h=parseInt(h,10)))f[n]=10*f[n]+h,k[n]++;else break;if(2===n||g<c.length)throw"Corrupted number";f[3]=Math.pow(10,k[1]);f[4]=0<f[2]?Math.pow(10,k[2])-1:1;d=f[2]+f[4]*(f[0]*f[3]+f[1]);c=f[3]*f[4];break;default:throw"Unknown type";}x(b,e,d,
c)}function u(b){return function(){0===(a.n=Math.abs(b(a.s*a.n/a.d)))&&(a.s=0);a.d=1;return a}}var b={n:0,d:0,s:0},a=this;a.abs=function(){a.s=1;return a};a.add=function(){l(arguments);return p(a.s*a.n*b.d+b.s*a.d*b.n,a.d*b.d)};a.sub=function(){l(arguments);return p(a.s*a.n*b.d-b.s*a.d*b.n,a.d*b.d)};a.mul=function(){l(arguments);return p(a.s*b.s*a.n*b.n,a.d*b.d)};a.div=function(){l(arguments);return p(a.s*b.s*a.n*b.d,a.d*b.n)};a.clone=function(){return new Fraction(this)};a.set=function(){l(arguments);return p(b.s*
b.n,b.d)};a.mod=function(){l(arguments);return 0===b.n*a.d?p(0,0):p(a.s*b.d*a.n%(b.n*a.d),b.d*a.d)};a.gcd=function(){l(arguments);return p(q(b.n,a.n),b.d*a.d/q(b.d,a.d))};a.ceil=u(Math.ceil);a.floor=u(Math.floor);a.round=u(Math.round);a.reciprocal=function(){return p(a.s*a.d,a.n)};a.equals=function(){l(arguments);return a.s*a.n*b.d===b.s*b.n*a.d};a.compare=function(){l(arguments);return a.s*a.n*b.d-b.s*b.n*a.d};a.divisible=function(){l(arguments);return!!(b.n*a.d)&&!(a.n*b.d%(b.n*a.d))};a.valueOf=
function(){return a.s*a.n/a.d};a.toFraction=function(){var b=a.n%a.d;return a.n>a.d?0===a.n%a.d?""+a.s*a.n/a.d:a.s*(a.n-b)/a.d+" "+b+"/"+a.d:a.s*a.n+"/"+a.d};a.toLatex=function(){var b="";0>a.s&&(b+="-");1===a.d?b+=a.n:(b=b+"\frac{"+a.n,b+="}{",b+=a.d,b+="}");return b};a.toString=function(){var b=String(a.n).split(""),d=a.d,c=0,e=[~a.s?"":"-","",""],f="",k=r(a.n,a.d),h;a:{h=a.d;for(var g=0;300>g;g++)if(t(g,h)===t(g+k,h)){h=g;break a}h=0}for(var g=-1,m=1,n=10+k+h+b.length,l=0;l<n;l++,c*=10){l<b.length?
c+=Number(b[l]):(m=2,g++);if(0<k)if(g===h)e[m]+=f+"(",f="";else if(g===k+h){e[m]+=f+")";break}c>=d?(e[m]+=f+(c/d|0),f="",c%=d):1<m?f+="0":e[m]&&(e[m]+="0")}e[0]+=e[1]||"0";return e[2]?e[0]+"."+e[2]:e[0]};l(arguments);a.s=b.s;a.n=b.n;a.d=b.d}"undefined"!==typeof module&&module.exports&&(module.exports=Fraction);

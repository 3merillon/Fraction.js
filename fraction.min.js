/*
Fraction.js v1.9.0 15/05/2015
http://www.xarg.org/2014/03/precise-calculations-in-javascript/

Copyright (c) 2014, Robert Eisele (robert@xarg.org)
Dual licensed under the MIT or GPL Version 2 licenses.
*/
"use strict";function Fraction(r,y){function t(a,b){for(var c;b;)c=a,a=b,b=c%b;return a}function u(a,b){if(0===b%2)return u(a,b/2);if(0===b%5)return u(a,b/5);for(var c=1;2E3>c;c++)if(1===v(c,b))return c;return 0}function v(a,b){for(var c=10,d=1;0<a;c=c*c%b,a>>=1)a&1&&(d=d*c%b);return d}function q(f,b){if(!b)throw"DIV/0";a.s=(0<=f)-(0>f);f=Math.abs(f);var c=t(b,f);a.n=f/c;a.d=b/c;return a}function m(a,b){var c=0,d=1,p=1,k=0,l=1,h=1,g=1,m=1,n=0;if(void 0!==a)if(void 0!==b)c=a,d=b,p=a*b;else switch(typeof a){case "object":if(null!==
a)if("d"in a&&"n"in a)c=a.n,d=a.d,p=c*d,"s"in a&&(p*=a.s);else if(0 in a)c=a[0],1 in a&&(d=a[1]),p=c*d;else throw"Unknown format";break;case "number":0>a&&(a=-a,p=-1);if(0===a%1)c=a;else if(0<a){1<=a&&(m=Math.pow(10,Math.floor(1+Math.log(a)/Math.LN10)),a/=m);for(;1E7>=l&&1E7>=g;)if(d=(k+h)/(l+g),a===d){1E7>=l+g?(c=k+h,d=l+g):g>l?(c=h,d=g):(c=k,d=l);break}else a>d?(k+=h,l+=g):(h+=k,g+=l),1E7<l?(c=h,d=g):(c=k,d=l);c*=m}break;case "string":d=a.split("/");if(2===d.length){c=p=parseInt(d[0],10);d=parseInt(d[1],
10);break}d=a.split("");k=[0,0,0,0,0];l=[0,0,0,0,0];for(g=0;g<d.length;g++)if(h=d[g],"."===h)if(0===n)n++;else break;else if("("===h||"'"===h||")"===h)if(0<n&&3>n)n++;else break;else if(0!==g||"+"!==h)if(0===g&&"-"===h)p=-1;else if(3>n&&!isNaN(h=parseInt(h,10)))k[n]=10*k[n]+h,l[n]++;else break;if(2===n||g<d.length)throw"Corrupted number";k[3]=Math.pow(10,l[1]);k[4]=0<k[2]?Math.pow(10,l[2])-1:1;c=k[2]+k[4]*(k[0]*k[3]+k[1]);d=k[3]*k[4];break;default:throw"Unknown type";}if(!d)throw"DIV/0";e.s=(0<=p)-
(0>p);e.n=Math.abs(c);e.d=Math.abs(d)}function w(f){return function(){0===(a.n=Math.abs(f(a.s*a.n/a.d)))&&(a.s=0);a.d=1;return a}}var e={n:0,d:0,s:0},a=this;a.abs=function(){a.s=1;return a};a.add=function(f,b){m(f,b);return q(a.s*a.n*e.d+e.s*a.d*e.n,a.d*e.d)};a.sub=function(f,b){m(f,b);return q(a.s*a.n*e.d-e.s*a.d*e.n,a.d*e.d)};a.mul=function(f,b){m(f,b);return q(a.s*e.s*a.n*e.n,a.d*e.d)};a.div=function(f,b){m(f,b);return q(a.s*e.s*a.n*e.d,a.d*e.n)};a.clone=function(){return new Fraction(this)};a.set=function(a,
b){m(a,b);return q(e.s*e.n,e.d)};a.mod=function(f,b){m(f,b);return 0===e.n*a.d?q(0,0):q(a.s*e.d*a.n%(e.n*a.d),e.d*a.d)};a.gcd=function(f,b){m(f,b);return q(t(e.n,a.n),e.d*a.d/t(e.d,a.d))};a.ceil=w(Math.ceil);a.floor=w(Math.floor);a.round=w(Math.round);a.reciprocal=function(){return q(a.s*a.d,a.n)};a.pow=function(f){var b=a.d,c=a.n;0>f?(a.d=Math.pow(c,-f),a.n=Math.pow(b,-f)):(a.d=Math.pow(b,f),a.n=Math.pow(c,f));0===f%2&&(a.s=1);return a};a.equals=function(f,b){m(f,b);return a.s*a.n*e.d===e.s*e.n*
a.d};a.compare=function(f,b){m(f,b);var c=a.s*a.n*e.d-e.s*e.n*a.d;return(0<c)-(0>c)};a.divisible=function(f,b){m(f,b);return!!(e.n*a.d)&&!(a.n*e.d%(e.n*a.d))};a.valueOf=function(){return a.s*a.n/a.d};a.toFraction=function(){var f,b="",c=a.n,d=a.d;0>a.s&&(b+="-");1===d?b+=c:(f=Math.floor(c/d),0<f&&(b=b+f+" ",c=c%d),b+=c,b+="/",b+=d);return b};a.toLatex=function(){var f,b="",c=a.n,d=a.d;0>a.s&&(b+="-");1===d?b+=c:(f=Math.floor(c/d),0<f&&(b+=f,c=c%d),b=b+"\frac{"+c,b+="}{",b+=d,b+="}");return b};a.toString=
function(){var f=String(a.n).split(""),b=a.d,c=0,d=[~a.s?"":"-","",""],e="",k=u(a.n,a.d),l;a:{l=a.d;for(var h=0;300>h;h++)if(v(h,l)===v(h+k,l)){l=h;break a}l=0}for(var h=-1,g=1,m=10+k+l+f.length,n=0;n<m;n++,c*=10){n<f.length?c+=Number(f[n]):(g=2,h++);if(0<k)if(h===l)d[g]+=e+"(",e="";else if(h===k+l){d[g]+=e+")";break}c>=b?(d[g]+=e+(c/b|0),e="",c%=b):1<g?e+="0":d[g]&&(d[g]+="0")}d[0]+=d[1]||"0";return d[2]?d[0]+"."+d[2]:d[0]};m(r,y);r=t(e.d,e.n);a.s=e.s;a.n=e.n/r;a.d=e.d/r}
"undefined"!==typeof module&&module.exports&&(module.exports=Fraction);

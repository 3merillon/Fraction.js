/*
Fraction.js v1.8.0 12/05/2015
http://www.xarg.org/2014/03/precise-calculations-in-javascript/

Copyright (c) 2014, Robert Eisele (robert@xarg.org)
Dual licensed under the MIT or GPL Version 2 licenses.
*/
"use strict";function Fraction(r,y){function t(a,d){for(var e;d;)e=a,a=d,d=e%d;return a}function u(a,d){if(0===d%2)return u(a,d/2);if(0===d%5)return u(a,d/5);for(var e=1;2E3>e;e++)if(1===v(e,d))return e;return 0}function v(a,d){for(var e=10,f=1;0<a;e=e*e%d,a>>=1)a&1&&(f=f*e%d);return f}function q(b,d){if(!d)throw"DIV/0";a.s=(0<=b)-(0>b);b=Math.abs(b);var e=t(d,b);a.n=b/e;a.d=d/e;return a}function m(a,d){var e=0,f=1,p=1,k=0,l=1,h=1,g=1,m=1,n=0;if(void 0!==a)if(void 0!==d)e=a,f=d,p=a*d;else switch(typeof a){case "object":if(null!==
a)if("d"in a&&"n"in a)e=a.n,f=a.d,p=e*f,"s"in a&&(p*=a.s);else if(0 in a)e=a[0],1 in a&&(f=a[1]),p=e*f;else throw"Unknown format";break;case "number":0>a&&(a=-a,p=-1);if(0===a%1)e=a;else if(0<a){1<=a&&(m=Math.pow(10,Math.floor(1+Math.log(a)/Math.LN10)),a/=m);for(;1E7>=l&&1E7>=g;)if(f=(k+h)/(l+g),a===f){1E7>=l+g?(e=k+h,f=l+g):g>l?(e=h,f=g):(e=k,f=l);break}else a>f?(k+=h,l+=g):(h+=k,g+=l),1E7<l?(e=h,f=g):(e=k,f=l);e*=m}break;case "string":f=a.split("/");if(2===f.length){e=p=parseInt(f[0],10);f=parseInt(f[1],
10);break}f=a.split("");k=[0,0,0,0,0];l=[0,0,0,0,0];for(g=0;g<f.length;g++)if(h=f[g],"."===h)if(0===n)n++;else break;else if("("===h||"'"===h||")"===h)if(0<n&&3>n)n++;else break;else if(0!==g||"+"!==h)if(0===g&&"-"===h)p=-1;else if(3>n&&!isNaN(h=parseInt(h,10)))k[n]=10*k[n]+h,l[n]++;else break;if(2===n||g<f.length)throw"Corrupted number";k[3]=Math.pow(10,l[1]);k[4]=0<k[2]?Math.pow(10,l[2])-1:1;e=k[2]+k[4]*(k[0]*k[3]+k[1]);f=k[3]*k[4];break;default:throw"Unknown type";}if(!f)throw"DIV/0";c.s=(0<=p)-
(0>p);c.n=Math.abs(e);c.d=Math.abs(f)}function w(b){return function(){0===(a.n=Math.abs(b(a.s*a.n/a.d)))&&(a.s=0);a.d=1;return a}}var c={n:0,d:0,s:0},a=this;a.abs=function(){a.s=1;return a};a.add=function(b,d){m(b,d);return q(a.s*a.n*c.d+c.s*a.d*c.n,a.d*c.d)};a.sub=function(b,d){m(b,d);return q(a.s*a.n*c.d-c.s*a.d*c.n,a.d*c.d)};a.mul=function(b,d){m(b,d);return q(a.s*c.s*a.n*c.n,a.d*c.d)};a.div=function(b,d){m(b,d);return q(a.s*c.s*a.n*c.d,a.d*c.n)};a.clone=function(){return new Fraction(this)};a.set=function(a,
d){m(a,d);return q(c.s*c.n,c.d)};a.mod=function(b,d){m(b,d);return 0===c.n*a.d?q(0,0):q(a.s*c.d*a.n%(c.n*a.d),c.d*a.d)};a.gcd=function(b,d){m(b,d);return q(t(c.n,a.n),c.d*a.d/t(c.d,a.d))};a.ceil=w(Math.ceil);a.floor=w(Math.floor);a.round=w(Math.round);a.reciprocal=function(){return q(a.s*a.d,a.n)};a.pow=function(b){var d=a.d,e=a.n;0>b?(a.d=Math.pow(e,-b),a.n=Math.pow(d,-b)):(a.d=Math.pow(d,b),a.n=Math.pow(e,b));0===b%2&&(a.s=1);return a};a.equals=function(b,d){m(b,d);return a.s*a.n*c.d===c.s*c.n*
a.d};a.compare=function(b,d){m(b,d);var e=a.s*a.n*c.d-c.s*c.n*a.d;return(0<e)-(0>e)};a.divisible=function(b,d){m(b,d);return!!(c.n*a.d)&&!(a.n*c.d%(c.n*a.d))};a.valueOf=function(){return a.s*a.n/a.d};a.toFraction=function(){var b=a.n%a.d;return a.n>a.d?0===a.n%a.d?""+a.s*a.n/a.d:a.s*(a.n-b)/a.d+" "+b+"/"+a.d:a.s*a.n+"/"+a.d};a.toLatex=function(){var b="";0>a.s&&(b+="-");1===a.d?b+=a.n:(b=b+"\frac{"+a.n,b+="}{",b+=a.d,b+="}");return b};a.toString=function(){var b=String(a.n).split(""),d=a.d,e=0,f=
[~a.s?"":"-","",""],c="",k=u(a.n,a.d),l;a:{l=a.d;for(var h=0;300>h;h++)if(v(h,l)===v(h+k,l)){l=h;break a}l=0}for(var h=-1,g=1,m=10+k+l+b.length,n=0;n<m;n++,e*=10){n<b.length?e+=Number(b[n]):(g=2,h++);if(0<k)if(h===l)f[g]+=c+"(",c="";else if(h===k+l){f[g]+=c+")";break}e>=d?(f[g]+=c+(e/d|0),c="",e%=d):1<g?c+="0":f[g]&&(f[g]+="0")}f[0]+=f[1]||"0";return f[2]?f[0]+"."+f[2]:f[0]};m(r,y);r=t(c.d,c.n);a.s=c.s;a.n=c.n/r;a.d=c.d/r}"undefined"!==typeof module&&module.exports&&(module.exports=Fraction);

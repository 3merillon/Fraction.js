/*
Fraction.js v1.8.0 12/05/2015
http://www.xarg.org/2014/03/precise-calculations-in-javascript/

Copyright (c) 2014, Robert Eisele (robert@xarg.org)
Dual licensed under the MIT or GPL Version 2 licenses.
*/
"use strict";function Fraction(r,y){function t(a,d){for(var b;d;)b=a,a=d,d=b%d;return a}function u(a,d){if(0===d%2)return u(a,d/2);if(0===d%5)return u(a,d/5);for(var b=1;2E3>b;b++)if(1===v(b,d))return b;return 0}function v(a,b){for(var e=10,c=1;0<a;e=e*e%b,a>>=1)a&1&&(c=c*e%b);return c}function q(k,b){if(!b)throw"DIV/0";a.s=(0<=k)-(0>k);k=Math.abs(k);var e=t(b,k);a.n=k/e;a.d=b/e;return a}function n(a,d){var e=0,c=1,m=1,h=0,l=1,g=1,f=1,n=1,p=0;if(void 0!==a)if(void 0!==d)e=a,c=d,m=a*d;else switch(typeof a){case "object":if(null!==
a)if("d"in a&&"n"in a)e=a.n,c=a.d,m=e*c,"s"in a&&(m*=a.s);else if(0 in a)e=a[0],1 in a&&(c=a[1]),m=e*c;else throw"Unknown format";break;case "number":0>a&&(a=-a,m=-1);if(0===a%1)e=a;else if(0<a){1<=a&&(n=Math.pow(10,Math.floor(1+Math.log(a)/Math.LN10)),a/=n);for(;1E7>=l&&1E7>=f;)if(c=(h+g)/(l+f),a===c){1E7>=l+f?(e=h+g,c=l+f):f>l?(e=g,c=f):(e=h,c=l);break}else a>c?(h+=g,l+=f):(g+=h,f+=l),1E7<l?(e=g,c=f):(e=h,c=l);e*=n}break;case "string":c=a.split("/");if(2===c.length){e=m=parseInt(c[0],10);c=parseInt(c[1],
10);break}c=a.split("");h=[0,0,0,0,0];l=[0,0,0,0,0];for(f=0;f<c.length;f++)if(g=c[f],"."===g)if(0===p)p++;else break;else if("("===g||"'"===g||")"===g)if(0<p&&3>p)p++;else break;else if(0!==f||"+"!==g)if(0===f&&"-"===g)m=-1;else if(3>p&&!isNaN(g=parseInt(g,10)))h[p]=10*h[p]+g,l[p]++;else break;if(2===p||f<c.length)throw"Corrupted number";h[3]=Math.pow(10,l[1]);h[4]=0<h[2]?Math.pow(10,l[2])-1:1;e=h[2]+h[4]*(h[0]*h[3]+h[1]);c=h[3]*h[4];break;default:throw"Unknown type";}if(!c)throw"DIV/0";b.s=(0<=m)-
(0>m);b.n=Math.abs(e);b.d=Math.abs(c)}function w(b){return function(){0===(a.n=Math.abs(b(a.s*a.n/a.d)))&&(a.s=0);a.d=1;return a}}var b={n:0,d:0,s:0},a=this;a.abs=function(){a.s=1;return a};a.add=function(k,d){n(k,d);return q(a.s*a.n*b.d+b.s*a.d*b.n,a.d*b.d)};a.sub=function(k,d){n(k,d);return q(a.s*a.n*b.d-b.s*a.d*b.n,a.d*b.d)};a.mul=function(k,d){n(k,d);return q(a.s*b.s*a.n*b.n,a.d*b.d)};a.div=function(k,d){n(k,d);return q(a.s*b.s*a.n*b.d,a.d*b.n)};a.clone=function(){return new Fraction(this)};a.set=function(a,
d){n(a,d);return q(b.s*b.n,b.d)};a.mod=function(k,d){n(k,d);return 0===b.n*a.d?q(0,0):q(a.s*b.d*a.n%(b.n*a.d),b.d*a.d)};a.gcd=function(k,d){n(k,d);return q(t(b.n,a.n),b.d*a.d/t(b.d,a.d))};a.ceil=w(Math.ceil);a.floor=w(Math.floor);a.round=w(Math.round);a.reciprocal=function(){return q(a.s*a.d,a.n)};a.equals=function(k,d){n(k,d);return a.s*a.n*b.d===b.s*b.n*a.d};a.compare=function(k,d){n(k,d);return a.s*a.n*b.d-b.s*b.n*a.d};a.divisible=function(k,d){n(k,d);return!!(b.n*a.d)&&!(a.n*b.d%(b.n*a.d))};a.valueOf=
function(){return a.s*a.n/a.d};a.toFraction=function(){var b=a.n%a.d;return a.n>a.d?0===a.n%a.d?""+a.s*a.n/a.d:a.s*(a.n-b)/a.d+" "+b+"/"+a.d:a.s*a.n+"/"+a.d};a.toLatex=function(){var b="";0>a.s&&(b+="-");1===a.d?b+=a.n:(b=b+"\frac{"+a.n,b+="}{",b+=a.d,b+="}");return b};a.toString=function(){var b=String(a.n).split(""),d=a.d,e=0,c=[~a.s?"":"-","",""],m="",h=u(a.n,a.d),l;a:{l=a.d;for(var g=0;300>g;g++)if(v(g,l)===v(g+h,l)){l=g;break a}l=0}for(var g=-1,f=1,n=10+h+l+b.length,p=0;p<n;p++,e*=10){p<b.length?
e+=Number(b[p]):(f=2,g++);if(0<h)if(g===l)c[f]+=m+"(",m="";else if(g===h+l){c[f]+=m+")";break}e>=d?(c[f]+=m+(e/d|0),m="",e%=d):1<f?m+="0":c[f]&&(c[f]+="0")}c[0]+=c[1]||"0";return c[2]?c[0]+"."+c[2]:c[0]};n(r,y);r=t(b.d,b.n);a.s=b.s;a.n=b.n/r;a.d=b.d/r}"undefined"!==typeof module&&module.exports&&(module.exports=Fraction);

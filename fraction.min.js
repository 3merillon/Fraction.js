/*
 Fraction.js v1.5.0 08/02/2015
 http://www.xarg.org/2014/03/precise-calculations-in-javascript/

 Copyright (c) 2014, Robert Eisele (robert@xarg.org)
 Dual licensed under the MIT or GPL Version 2 licenses.
*/
function Fraction(){function p(a,c){if(0===c%2)return p(a,c/2);if(0===c%5)return p(a,c/5);for(var e=1;1E4>=e;e++)if(1===q(e,c))return e;return 0}function q(a,c){for(var e=10,b=1;0<a;e=e*e%c,a>>=1)a&1&&(b=b*e%c);return b}function n(u,c){v(a,u,u,c);return a}function v(a,c,b,h){if(!h)throw"DIV/0";a.s=(0<=c)-(0>c);b=Math.abs(b);h=Math.abs(h);c=b;for(var d=h,g;d;)g=d,d=c%d,c=g;a.n=b/c;a.d=h/c}function k(a){var c=0,e=1,h=1,d=0,g=1,f=1,l=1,k=1,m=0;if(1===a.length)a=a[0];else if(2!==a.length)throw"Wrong Parameter";
switch(typeof a){case "object":if(null!==a)if(void 0!==a[0])c=a[0],void 0!==a[1]&&(e=a[1]),h=c*e;else if("d"in a&&"n"in a)c=a.n,e=a.d,h=c*e,void 0!==a.s&&(h*=a.s);else throw"Unknown format";break;case "number":0>a&&(a=-a,h=-1);if(0<a){1<=a&&(k=Math.pow(10,Math.floor(1+Math.log(a)/Math.LN10)),a/=k);for(;1E7>=g&&1E7>=l;)if(c=(d+f)/(g+l),a===c){1E7>=g+l?(c=d+f,e=g+l):l>g?(c=f,e=l):(c=d,e=g);break}else a>c?(d+=f,g+=l):(f+=d,l+=g),1E7<g?(c=f,e=l):(c=d,e=g);c*=k}break;case "string":c=a.split("");d=[0,0,
0,0,0];g=[0,0,0,0,0];for(l=0;l<c.length;l++)if(f=c[l],"."===f)if(0===m)m++;else break;else if("("===f||"'"===f||")"===f)if(0<m&&3>m)m++;else break;else if(0!==l||"+"!==f)if(0===l&&"-"===f)h=-1;else if(3>m&&!isNaN(f=parseInt(f,10)))d[m]=10*d[m]+f,g[m]++;else break;if(2===m||l<c.length)throw"Corrupted number";d[3]=Math.pow(10,g[1]);d[4]=0<d[2]?Math.pow(10,g[2])-1:1;c=d[2]+d[4]*(d[0]*d[3]+d[1]);e=d[3]*d[4];break;default:throw"Unknown type";}v(b,h,c,e)}function r(b){return function(){0===(a.n=Math.abs(b(a.s*
a.n/a.d)))&&(a.s=0);a.d=1;return a}}var b={n:0,d:0,s:0},a=this;a.abs=function(){a.s=1;return a};a.add=function(){k(arguments);return n(a.s*a.n*b.d+b.s*a.d*b.n,a.d*b.d)};a.sub=function(){k(arguments);return n(a.s*a.n*b.d-b.s*a.d*b.n,a.d*b.d)};a.mul=function(){k(arguments);return n(a.s*b.s*a.n*b.n,a.d*b.d)};a.div=function(){k(arguments);return n(a.s*b.s*a.n*b.d,a.d*b.n)};a.clone=function(){return new Fraction(this)};a.set=function(){k(arguments);return n(b.s*b.n,b.d)};a.mod=function(){k(arguments);return 0===
b.n*a.d?n(0,0):n(a.s*b.d*a.n%(b.n*a.d),b.d*a.d)};a.ceil=r(Math.ceil);a.floor=r(Math.floor);a.round=r(Math.round);a.reciprocal=function(){return n(a.s*a.d,a.n)};a.equals=function(){k(arguments);return b.s*b.n*a.d===a.s*a.n*b.d};a.divisible=function(){k(arguments);return!!(b.n*a.d)&&!(a.n*b.d%(b.n*a.d))};a.toNumber=function(){return a.s*a.n/a.d};a.toFraction=function(){var b=a.n%a.d;return a.n>a.d?0===a.n%a.d?""+a.s*a.n/a.d:a.s*(a.n-b)/a.d+" "+b+"/"+a.d:a.s*a.n+"/"+a.d};a.toString=function(){var b=
(""+a.n).split(""),c=a.d,e=0,h="",d=p(a.n,a.d),g;a:{g=a.d;for(var f=0;300>f;f++)if(q(f,g)===q(f+d,g)){g=f;break a}g=0}for(var f=-1,l=10+d+g+b.length,k=0;k<l;k++){e*=10;k<b.length?e+=parseInt(b[k],10):k===b.length?(h+=".",f=0):f++;if(0<d&&f===g)h+="(";else if(0<d&&f===d+g){h+=")";break}e>=c?(h+=e/c|0,e%=c):h+="0"}return(~a.s?"":"-")+h.replace(/^0+([1-9]|0\.)/g,"$1").replace(/(\d)0+$/,"$1")};k(arguments);a.s=b.s;a.n=b.n;a.d=b.d}"undefined"!==typeof module&&module.exports&&(module.exports=Fraction);

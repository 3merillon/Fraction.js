/*
Fraction.js v1.8.0 12/05/2015
http://www.xarg.org/2014/03/precise-calculations-in-javascript/

Copyright (c) 2014, Robert Eisele (robert@xarg.org)
Dual licensed under the MIT or GPL Version 2 licenses.
*/
function Fraction(y,z){"use strict";function r(a,c){for(var f;c;)f=a,a=c,c=f%c;return a}function t(a,c){if(0===c%2)return t(a,c/2);if(0===c%5)return t(a,c/5);for(var f=1;2E3>f;f++)if(1===u(f,c))return f;return 0}function u(a,c){for(var f=10,b=1;0<a;f=f*f%c,a>>=1)a&1&&(b=b*f%c);return b}function p(e,c){x(a,e,e,c);return a}function x(a,c,f,b){if(!b)throw"DIV/0";a.s=(0<=c)-(0>c);f=Math.abs(f);b=Math.abs(b);c=r(b,f);a.n=f/c;a.d=b/c}function m(a,c){var f=0,b=1,q=1,k=0,l=1,h=1,g=1,m=1,n=0;if(void 0!==c)f=a,b=c,q=a*c;else switch(typeof a){case "object":if(null!==
a)if("d"in a&&"n"in a)f=a.n,b=a.d,q=f*b,"s"in a&&(q*=a.s);else if(0 in a)f=a[0],1 in a&&(b=a[1]),q=f*b;else throw"Unknown format";break;case "number":0>a&&(a=-a,q=-1);if(0<a){1<=a&&(m=Math.pow(10,Math.floor(1+Math.log(a)/Math.LN10)),a/=m);for(;1E7>=l&&1E7>=g;)if(b=(k+h)/(l+g),a===b){1E7>=l+g?(f=k+h,b=l+g):g>l?(f=h,b=g):(f=k,b=l);break}else a>b?(k+=h,l+=g):(h+=k,g+=l),1E7<l?(f=h,b=g):(f=k,b=l);f*=m}break;case "string":b=a.split("/");if(2===b.length){f=q=parseInt(b[0],10);b=parseInt(b[1],10);break}b=
a.split("");k=[0,0,0,0,0];l=[0,0,0,0,0];for(g=0;g<b.length;g++)if(h=b[g],"."===h)if(0===n)n++;else break;else if("("===h||"'"===h||")"===h)if(0<n&&3>n)n++;else break;else if(0!==g||"+"!==h)if(0===g&&"-"===h)q=-1;else if(3>n&&!isNaN(h=parseInt(h,10)))k[n]=10*k[n]+h,l[n]++;else break;if(2===n||g<b.length)throw"Corrupted number";k[3]=Math.pow(10,l[1]);k[4]=0<k[2]?Math.pow(10,l[2])-1:1;f=k[2]+k[4]*(k[0]*k[3]+k[1]);b=k[3]*k[4];break;default:throw"Unknown type";}x(d,q,f,b)}function v(e){return function(){0===
(a.n=Math.abs(e(a.s*a.n/a.d)))&&(a.s=0);a.d=1;return a}}var d={n:0,d:0,s:0},a=this;a.abs=function(){a.s=1;return a};a.add=function(e,c){m(e,c);return p(a.s*a.n*d.d+d.s*a.d*d.n,a.d*d.d)};a.sub=function(e,c){m(e,c);return p(a.s*a.n*d.d-d.s*a.d*d.n,a.d*d.d)};a.mul=function(e,c){m(e,c);return p(a.s*d.s*a.n*d.n,a.d*d.d)};a.div=function(e,c){m(e,c);return p(a.s*d.s*a.n*d.d,a.d*d.n)};a.clone=function(){return new Fraction(this)};a.set=function(a,c){m(a,c);return p(d.s*d.n,d.d)};a.mod=function(e,c){m(e,c);return 0===
d.n*a.d?p(0,0):p(a.s*d.d*a.n%(d.n*a.d),d.d*a.d)};a.gcd=function(e,c){m(e,c);return p(r(d.n,a.n),d.d*a.d/r(d.d,a.d))};a.ceil=v(Math.ceil);a.floor=v(Math.floor);a.round=v(Math.round);a.reciprocal=function(){return p(a.s*a.d,a.n)};a.equals=function(e,c){m(e,c);return a.s*a.n*d.d===d.s*d.n*a.d};a.compare=function(e,c){m(e,c);return a.s*a.n*d.d-d.s*d.n*a.d};a.divisible=function(e,c){m(e,c);return!!(d.n*a.d)&&!(a.n*d.d%(d.n*a.d))};a.valueOf=function(){return a.s*a.n/a.d};a.toFraction=function(){var e=a.n%
a.d;return a.n>a.d?0===a.n%a.d?""+a.s*a.n/a.d:a.s*(a.n-e)/a.d+" "+e+"/"+a.d:a.s*a.n+"/"+a.d};a.toLatex=function(){var e="";0>a.s&&(e+="-");1===a.d?e+=a.n:(e=e+"\frac{"+a.n,e+="}{",e+=a.d,e+="}");return e};a.toString=function(){var e=String(a.n).split(""),c=a.d,f=0,b=[~a.s?"":"-","",""],d="",k=t(a.n,a.d),l;a:{l=a.d;for(var h=0;300>h;h++)if(u(h,l)===u(h+k,l)){l=h;break a}l=0}for(var h=-1,g=1,m=10+k+l+e.length,n=0;n<m;n++,f*=10){n<e.length?f+=Number(e[n]):(g=2,h++);if(0<k)if(h===l)b[g]+=d+"(",d="";else if(h===
k+l){b[g]+=d+")";break}f>=c?(b[g]+=d+(f/c|0),d="",f%=c):1<g?d+="0":b[g]&&(b[g]+="0")}b[0]+=b[1]||"0";return b[2]?b[0]+"."+b[2]:b[0]};m(y,z);a.s=d.s;a.n=d.n;a.d=d.d}"undefined"!==typeof module&&module.exports&&(module.exports=Fraction);
